<!DOCTYPE html>
<html>
<head>
	<meta charset="utf-8">
	<title>Class SmartMysqliExtDb | Smart.Framework Documentation :: 2019-10-23 06:42</title>
	<link rel="stylesheet" href="resources/style.css?2361662816">
	<script src="resources/combined.js?4174473549"></script>
	<script src="elementlist.js?830703499"></script>
</head>

<body>
<div id="left">
	<div id="menu">
		<a href="index.html" title="Overview"><span>Overview</span></a>


		<div id="groups">
			<h3>Packages</h3>
			<ul>
				<li><a href="package-Application.html">Application</a>
						</li>
				<li><a href="package-Archivers.html">Archivers</a>
						</li>
				<li><a href="package-Base.html">Base</a>
						</li>
				<li><a href="package-Components.Core.html">Components:Core</a>
						</li>
				<li><a href="package-Components.Misc.html">Components:Misc</a>
						</li>
				<li><a href="package-Converters.html">Converters</a>
						</li>
				<li><a href="package-Crypto.html">Crypto</a>
						</li>
				<li><a href="package-Database.MongoDB.html">Database:MongoDB</a>
						</li>
				<li class="active"><a href="package-Database.MySQL.html">Database:MySQL</a>
						</li>
				<li><a href="package-Database.PostgreSQL.html">Database:PostgreSQL</a>
						</li>
				<li><a href="package-Database.Redis.html">Database:Redis</a>
						</li>
				<li><a href="package-Database.SQLite.html">Database:SQLite</a>
						</li>
				<li><a href="package-Exporters.html">Exporters</a>
						</li>
				<li><a href="package-Filesystem.html">Filesystem</a>
						</li>
				<li><a href="package-Mailer.html">Mailer</a>
						</li>
				<li><a href="package-Network.html">Network</a>
						</li>
				<li><a href="package-Parsers.html">Parsers</a>
						</li>
				<li><a href="package-Templating.Engines.html">Templating:Engines</a>
						</li>
			</ul>
		</div>

		<hr>


		<div id="elements">
			<h3>Classes</h3>
			<ul>
				<li><a href="class-SmartMysqliDb.html">SmartMysqliDb</a></li>
				<li class="active"><a href="class-SmartMysqliExtDb.html">SmartMysqliExtDb</a></li>
			</ul>





		</div>
	</div>
</div>

<div id="splitter"></div>

<div id="right">
<div id="rightInner">
	<form id="search">
		<input type="hidden" name="cx" value="">
		<input type="hidden" name="ie" value="UTF-8">
		<input type="text" name="q" class="text">
		<input type="submit" value="Search">
	</form>

	<div id="navigation">
		<ul>
			<li>
				<a href="index.html" title="Overview"><span>Overview</span></a>
			</li>
			<li>
				<a href="package-Database.MySQL.html" title="Summary of Database:MySQL"><span>Package</span></a>
			</li>
			<li class="active">
<span>Class</span>			</li>
		</ul>
		<ul>
			<li>
				<a href="tree.html" title="Tree view of classes, interfaces, traits and exceptions"><span>Tree</span></a>
			</li>
		</ul>
		<ul>
		</ul>
	</div>

<div id="content" class="class">
	<h1>Class SmartMysqliExtDb</h1>


	<div class="description">
	
<p>Class: SmartMysqliExtDb - provides a Dynamic (Extended) Client for MariaDB
Server / MySQL that can be used with custom made connections. This class is made
to be used with custom made MySQLi connections (other servers than default).</p>

<p>Tested and Stable with MariaDB versions: 5.1.x / 5.5.x / 10.x Tested and
Stable on MySQL versions: 5.0.x / 5.1.x / 5.5.x / 5.6.x / 5.7.x Tested and
Stable with Percona Server versions: 5.5.x / 5.6.x</p>

<pre>
<span
class="php-comment">// Sample config array for this class constructor:</span>
<span
class="php-var">$custom_mysql</span> = <span
class="php-keyword1">array</span>();
<span
class="php-var">$custom_mysql</span>[<span
class="php-quote">'type'</span>]         = <span
class="php-quote">'mysql'</span>;                 <span
class="php-comment">// mysql / mariadb / percona</span>
<span
class="php-var">$custom_mysql</span>[<span
class="php-quote">'server-host'</span>]  = <span
class="php-quote">'127.0.0.1'</span>;             <span
class="php-comment">// database host (default is 127.0.0.1)</span>
<span
class="php-var">$custom_mysql</span>[<span
class="php-quote">'server-port'</span>]  = <span
class="php-quote">'3306'</span>;                  <span
class="php-comment">// database port (default is 3306)</span>
<span
class="php-var">$custom_mysql</span>[<span
class="php-quote">'dbname'</span>]       = <span
class="php-quote">'smart_framework'</span>;       <span
class="php-comment">// database name</span>
<span
class="php-var">$custom_mysql</span>[<span
class="php-quote">'username'</span>]     = <span
class="php-quote">'root'</span>;                  <span
class="php-comment">// sql server user name</span>
<span
class="php-var">$custom_mysql</span>[<span
class="php-quote">'password'</span>]     = <span
class="php-keyword2">base64_encode</span>(<span
class="php-quote">'root'</span>);   <span
class="php-comment">// sql server Base64-Encoded password for that user name B64</span>
<span
class="php-var">$custom_mysql</span>[<span
class="php-quote">'timeout'</span>]      = <span
class="php-num">30</span>;                      <span
class="php-comment">// connection timeout (how many seconds to wait for a valid MySQL Connection)</span>
<span
class="php-var">$custom_mysql</span>[<span
class="php-quote">'slowtime'</span>]     = <span
class="php-num">0.0050</span>;                  <span
class="php-comment">// 0.0025 .. 0.0090 slow query time (for debugging)</span>
<span
class="php-var">$custom_mysql</span>[<span
class="php-quote">'transact'</span>]     = <span
class="php-quote">'REPEATABLE READ'</span>;       <span
class="php-comment">// Default Transaction Level: 'REPEATABLE READ' | 'READ COMMITTED' | '' to leave it as default</span>
<span
class="php-comment">// sample usage:</span>
<span
class="php-var">$mysql</span> = <span
class="php-keyword1">new</span> SmartMysqliExtDb(<span
class="php-var">$custom_mysql</span>);
<span
class="php-var">$mysql</span>-&gt;read_adata(<span
class="php-quote">'SELECT * FROM `my_table` LIMIT 100 OFFSET 0'</span>);
<span
class="php-comment">//... for other hints look to the samples of the class: SmartMysqliDb::*</span>
</pre>

	</div>









	<div class="info">
		<b>Final</b><br>
		
		
		<b>Package:</b> <a href="package-Database.MySQL.html">Database:MySQL</a><br>

				<b>Version:</b>
				v.20191009<br>
				<b>Depends:</b>
				extensions: PHP MySQLi ; classes: Smart, SmartUnicode, SmartUtils,
SmartComponents<br>
				<b>Hints:</b>
				This class have no catcheable Exception because the ONLY errors will raise are
when the server returns an ERROR regarding a malformed SQL Statement, which is
not acceptable to be just Exception, so will raise a fatal error !<br>
				<b>Usage:</b>
				dynamic object: (new Class())-&gt;method() - This class provides only DYNAMIC
methods<br>
		<b>Located at</b> core/plugins/lib_db_mysqli.php<br>
	</div>



	<table class="summary methods" id="methods">
	<caption>Methods summary</caption>
	<tr data-order="__construct" id="___construct">

		<td class="attributes"><code>
			 public 
			
			
			</code>
		</td>

		<td class="name"><div>
		<a class="anchor" href="#___construct">#</a>
		<code>__construct( <span>ARRAY <var>$y_configs_arr</var></span> )</code>

		<div class="description short">
			
<p>Class Constructor - will initiate also the custom connection for a MariaDB
Server / MySQL specified as parameters of this function.</p>

		</div>

		<div class="description detailed hidden">
			
<p>Class Constructor - will initiate also the custom connection for a MariaDB
Server / MySQL specified as parameters of this function.</p>



				<h4>Parameters</h4>
				<div class="list"><dl>
					<dt><var>$y_configs_arr</var></dt>
					<dd>:: The Array of Configuration parameters - the ARRAY STRUCTURE should be
identical with the default config.php: $configs['mysqli'].</dd>
				</dl></div>





		</div>
		</div></td>
	</tr>
	<tr data-order="getConnection" id="_getConnection">

		<td class="attributes"><code>
			 public 
			
			
			</code>
		</td>

		<td class="name"><div>
		<a class="anchor" href="#_getConnection">#</a>
		<code>getConnection( )</code>

		<div class="description short">
			
<p>Returns the connection resource of the current MariaDB Server / MySQL.</p>

		</div>

		<div class="description detailed hidden">
			
<p>Returns the connection resource of the current MariaDB Server / MySQL.</p>








		</div>
		</div></td>
	</tr>
	<tr data-order="quote_likes" id="_quote_likes">

		<td class="attributes"><code>
			 public 
			
			
			</code>
		</td>

		<td class="name"><div>
		<a class="anchor" href="#_quote_likes">#</a>
		<code>quote_likes( <span>STRING <var>$y_string</var></span> )</code>

		<div class="description short">
			
<p>Fix a string to be compliant with MySQL LIKE / SIMILAR syntax. It will use
special quotes for the LIKE / SIMILAR special characters: % _ This function IS
NOT INTENDED TO ESCAPE AGAINST SQL INJECTIONS ; USE IT ONLY WITH PREPARED PARAMS
OR USE escape_str() with mode 'likes'</p>

		</div>

		<div class="description detailed hidden">
			
<p>Fix a string to be compliant with MySQL LIKE / SIMILAR syntax. It will use
special quotes for the LIKE / SIMILAR special characters: % _ This function IS
NOT INTENDED TO ESCAPE AGAINST SQL INJECTIONS ; USE IT ONLY WITH PREPARED PARAMS
OR USE escape_str() with mode 'likes'</p>



				<h4>Parameters</h4>
				<div class="list"><dl>
					<dt><var>$y_string</var></dt>
					<dd>:: A String or a Number to be Quoted for LIKES</dd>
				</dl></div>





		</div>
		</div></td>
	</tr>
	<tr data-order="escape_str" id="_escape_str">

		<td class="attributes"><code>
			 public 
			STRING
			
			</code>
		</td>

		<td class="name"><div>
		<a class="anchor" href="#_escape_str">#</a>
		<code>escape_str( <span>STRING <var>$y_string</var></span>, <span>ENUM <var>$y_mode</var> = <span class="php-quote">''</span></span> )</code>

		<div class="description short">
			
<p>Escape a string to be compliant and Safe (against SQL Injection) with MySQL
standards. This function WILL NOT ADD the SINGLE QUOTES (') arround the string,
but just will just escape it to be safe.</p>

		</div>

		<div class="description detailed hidden">
			
<p>Escape a string to be compliant and Safe (against SQL Injection) with MySQL
standards. This function WILL NOT ADD the SINGLE QUOTES (') arround the string,
but just will just escape it to be safe.</p>



				<h4>Parameters</h4>
				<div class="list"><dl>
					<dt><var>$y_string</var></dt>
					<dd>:: A String or a Number to be Escaped</dd>
					<dt><var>$y_mode</var></dt>
					<dd>:: '' = default ; 'likes' = Escape LIKE Syntax (% _)</dd>
				</dl></div>

				<h4>Returns</h4>
				<div class="list">
					<code>STRING</code><br>:: The Escaped String / Number<br>
				</div>




		</div>
		</div></td>
	</tr>
	<tr data-order="check_if_table_exists" id="_check_if_table_exists">

		<td class="attributes"><code>
			 public 
			0/1
			
			</code>
		</td>

		<td class="name"><div>
		<a class="anchor" href="#_check_if_table_exists">#</a>
		<code>check_if_table_exists( <span>STRING <var>$y_table</var></span> )</code>

		<div class="description short">
			
<p>Check if a Table Exists in the current Database.</p>

		</div>

		<div class="description detailed hidden">
			
<p>Check if a Table Exists in the current Database.</p>



				<h4>Parameters</h4>
				<div class="list"><dl>
					<dt><var>$y_table</var></dt>
					<dd>:: The Table Name</dd>
				</dl></div>

				<h4>Returns</h4>
				<div class="list">
					<code>0/1</code><br>:: 1 if exists ; 0 if not<br>
				</div>




		</div>
		</div></td>
	</tr>
	<tr data-order="count_data" id="_count_data">

		<td class="attributes"><code>
			 public 
			INTEGER
			
			</code>
		</td>

		<td class="name"><div>
		<a class="anchor" href="#_count_data">#</a>
		<code>count_data( <span>STRING <var>$queryval</var></span>, <span>STRING <var>$params_or_title</var> = <span class="php-quote">''</span></span> )</code>

		<div class="description short">
			
<p>MySQL Query :: Count This function is intended to be used for count type
queries: SELECT COUNT().</p>

		</div>

		<div class="description detailed hidden">
			
<p>MySQL Query :: Count This function is intended to be used for count type
queries: SELECT COUNT().</p>



				<h4>Parameters</h4>
				<div class="list"><dl>
					<dt><var>$queryval</var></dt>
					<dd>:: the query</dd>
					<dt><var>$params_or_title</var></dt>
					<dd>:: &lt;em&gt;optional&lt;/em&gt; array of parameters or query title for easy debugging</dd>
				</dl></div>

				<h4>Returns</h4>
				<div class="list">
					<code>INTEGER</code><br>:: the result of COUNT()<br>
				</div>




		</div>
		</div></td>
	</tr>
	<tr data-order="read_data" id="_read_data">

		<td class="attributes"><code>
			 public 
			ARRAY
			
			</code>
		</td>

		<td class="name"><div>
		<a class="anchor" href="#_read_data">#</a>
		<code>read_data( <span>STRING <var>$queryval</var></span>, <span>STRING <var>$params_or_title</var> = <span class="php-quote">''</span></span> )</code>

		<div class="description short">
			
<p>MySQL Query :: Read (Non-Associative) one or multiple rows. This function is
intended to be used for read type queries: SELECT.</p>

		</div>

		<div class="description detailed hidden">
			
<p>MySQL Query :: Read (Non-Associative) one or multiple rows. This function is
intended to be used for read type queries: SELECT.</p>



				<h4>Parameters</h4>
				<div class="list"><dl>
					<dt><var>$queryval</var></dt>
					<dd>:: the query</dd>
					<dt><var>$params_or_title</var></dt>
					<dd>:: &lt;em&gt;optional&lt;/em&gt; array of parameters or query title for easy debugging</dd>
				</dl></div>

				<h4>Returns</h4>
				<div class="list">
					<code>ARRAY</code><br>(non-asociative) of results :: array('column-0-0', 'column-0-1', ...,
'column-0-n', 'column-1-0', 'column-1-1', ... 'column-1-n', ..., 'column-m-0',
'column-m-1', ..., 'column-m-n')<br>
				</div>




		</div>
		</div></td>
	</tr>
	<tr data-order="read_adata" id="_read_adata">

		<td class="attributes"><code>
			 public 
			ARRAY
			
			</code>
		</td>

		<td class="name"><div>
		<a class="anchor" href="#_read_adata">#</a>
		<code>read_adata( <span>STRING <var>$queryval</var></span>, <span>STRING <var>$params_or_title</var> = <span class="php-quote">''</span></span> )</code>

		<div class="description short">
			
<p>MySQL Query :: Read (Associative) one or multiple rows. This function is
intended to be used for read type queries: SELECT.</p>

		</div>

		<div class="description detailed hidden">
			
<p>MySQL Query :: Read (Associative) one or multiple rows. This function is
intended to be used for read type queries: SELECT.</p>



				<h4>Parameters</h4>
				<div class="list"><dl>
					<dt><var>$queryval</var></dt>
					<dd>:: the query</dd>
					<dt><var>$params_or_title</var></dt>
					<dd>:: &lt;em&gt;optional&lt;/em&gt; array of parameters or query title for easy debugging</dd>
				</dl></div>

				<h4>Returns</h4>
				<div class="list">
					<code>ARRAY</code><br>(asociative) of results :: array(0 =&gt; array('column1', 'column2', ...
'column-n'), 1 =&gt; array('column1', 'column2', ... 'column-n'), ..., m =&gt;
array('column1', 'column2', ... 'column-n'))<br>
				</div>




		</div>
		</div></td>
	</tr>
	<tr data-order="read_asdata" id="_read_asdata">

		<td class="attributes"><code>
			 public 
			ARRAY
			
			</code>
		</td>

		<td class="name"><div>
		<a class="anchor" href="#_read_asdata">#</a>
		<code>read_asdata( <span>STRING <var>$queryval</var></span>, <span>STRING <var>$params_or_title</var> = <span class="php-quote">''</span></span> )</code>

		<div class="description short">
			
<p>MySQL Query :: Read (Associative) - Single Row (just for 1 row, to easy the
use of data from queries). !!! This will raise an error if more than one row(s)
are returned !!! This function does not support multiple rows because the
associative data is structured without row iterator. For queries that return
more than one row use: read_adata() or read_data(). This function is intended to
be used for read type queries: SELECT.</p>

		</div>

		<div class="description detailed hidden">
			
<p>MySQL Query :: Read (Associative) - Single Row (just for 1 row, to easy the
use of data from queries). !!! This will raise an error if more than one row(s)
are returned !!! This function does not support multiple rows because the
associative data is structured without row iterator. For queries that return
more than one row use: read_adata() or read_data(). This function is intended to
be used for read type queries: SELECT.</p>



				<h4>Parameters</h4>
				<div class="list"><dl>
					<dt><var>$queryval</var></dt>
					<dd>:: the query</dd>
					<dt><var>$params_or_title</var></dt>
					<dd>:: &lt;em&gt;optional&lt;/em&gt; array of parameters or query title for easy debugging</dd>
				</dl></div>

				<h4>Returns</h4>
				<div class="list">
					<code>ARRAY</code><br>(asociative) of results :: Returns just a SINGLE ROW as: array('column1',
'column2', ... 'column-n')<br>
				</div>


				<h4>Hints</h4>
				<div class="list">
						ALWAYS use a LIMIT 1 OFFSET 0 with all queries using this function to avoid
situations that will return more than 1 rows and will raise ERROR with this
function.<br>
				</div>


		</div>
		</div></td>
	</tr>
	<tr data-order="write_data" id="_write_data">

		<td class="attributes"><code>
			 public 
			ARRAY
			
			</code>
		</td>

		<td class="name"><div>
		<a class="anchor" href="#_write_data">#</a>
		<code>write_data( <span>STRING <var>$queryval</var></span>, <span>STRING <var>$params_or_title</var> = <span class="php-quote">''</span></span> )</code>

		<div class="description short">
			
<p>MySQL Query :: Write. This function is intended to be used for write type
queries: BEGIN (TRANSACTION) ; COMMIT ; ROLLBACK ; INSERT ; INSERT IGNORE ;
REPLACE ; UPDATE ; CREATE SCHEMAS ; CALLING STORED PROCEDURES ...</p>

		</div>

		<div class="description detailed hidden">
			
<p>MySQL Query :: Write. This function is intended to be used for write type
queries: BEGIN (TRANSACTION) ; COMMIT ; ROLLBACK ; INSERT ; INSERT IGNORE ;
REPLACE ; UPDATE ; CREATE SCHEMAS ; CALLING STORED PROCEDURES ...</p>



				<h4>Parameters</h4>
				<div class="list"><dl>
					<dt><var>$queryval</var></dt>
					<dd>:: the query</dd>
					<dt><var>$params_or_title</var></dt>
					<dd>:: &lt;em&gt;optional&lt;/em&gt; array of parameters or query title for easy debugging</dd>
				</dl></div>

				<h4>Returns</h4>
				<div class="list">
					<code>ARRAY</code><br>:: [ 0 =&gt; 'control-message', 1 =&gt; #affected-rows, 2 =&gt;
#last-inserted-id(autoincrement)|0|null ]<br>
				</div>




		</div>
		</div></td>
	</tr>
	<tr data-order="prepare_statement" id="_prepare_statement">

		<td class="attributes"><code>
			 public 
			STRING
			
			</code>
		</td>

		<td class="name"><div>
		<a class="anchor" href="#_prepare_statement">#</a>
		<code>prepare_statement( <span>ARRAY <var>$arrdata</var></span>, <span>ENUM <var>$mode</var></span> )</code>

		<div class="description short">
			
<p>Create Escaped Write SQL Statements from Data - to be used with MySQL for:
INSERT ; UPDATE ; IN-SELECT Can be used with: write_data() to build INSERT /
UPDATE queries from an associative array or can be used with read_data(),
read_adata(), read_asdata(), count_data() to build IN-SELECT queries from a
non-associative array</p>

		</div>

		<div class="description detailed hidden">
			
<p>Create Escaped Write SQL Statements from Data - to be used with MySQL for:
INSERT ; UPDATE ; IN-SELECT Can be used with: write_data() to build INSERT /
UPDATE queries from an associative array or can be used with read_data(),
read_adata(), read_asdata(), count_data() to build IN-SELECT queries from a
non-associative array</p>



				<h4>Parameters</h4>
				<div class="list"><dl>
					<dt><var>$arrdata</var></dt>
					<dd>:: associative array: array of form data as $arr=array(); $arr['field1'] = 'a
string'; $arr['field2'] = 100; | non-associative array $arr[] = 'some value';
$arr[] = 'other-value', ...</dd>
					<dt><var>$mode</var></dt>
					<dd>:: mode: 'insert' | 'update' | 'in-select'</dd>
				</dl></div>

				<h4>Returns</h4>
				<div class="list">
					<code>STRING</code><br>:: The SQL partial Statement<br>
				</div>




		</div>
		</div></td>
	</tr>
	<tr data-order="prepare_param_query" id="_prepare_param_query">

		<td class="attributes"><code>
			 public 
			STRING
			
			</code>
		</td>

		<td class="name"><div>
		<a class="anchor" href="#_prepare_param_query">#</a>
		<code>prepare_param_query( <span>STRING <var>$query</var></span>, <span>ARRAY <var>$arrdata</var></span> )</code>

		<div class="description short">
			
<p>Create Escaped SQL Statements from Parameters and Array of Data by replacing
? (question marks) This can be used for a full SQL statement or just for a part.
The statement must not contain any Single Quotes to prevent SQL injections which
are unpredictable if mixing several statements at once !</p>

		</div>

		<div class="description detailed hidden">
			
<p>Create Escaped SQL Statements from Parameters and Array of Data by replacing
? (question marks) This can be used for a full SQL statement or just for a part.
The statement must not contain any Single Quotes to prevent SQL injections which
are unpredictable if mixing several statements at once !</p>



				<h4>Parameters</h4>
				<div class="list"><dl>
					<dt><var>$query</var></dt>
					<dd>:: SQL Statement to process like ' WHERE ("id" = ?)'</dd>
					<dt><var>$arrdata</var></dt>
					<dd>:: The non-associative array as of: $arr=array('a');</dd>
				</dl></div>

				<h4>Returns</h4>
				<div class="list">
					<code>STRING</code><br>:: The SQL processed (partial/full) Statement<br>
				</div>




		</div>
		</div></td>
	</tr>
	<tr data-order="new_safe_id" id="_new_safe_id">

		<td class="attributes"><code>
			 public 
			STRING
			
			</code>
		</td>

		<td class="name"><div>
		<a class="anchor" href="#_new_safe_id">#</a>
		<code>new_safe_id( <span>ENUM <var>$y_mode</var></span>, <span>STRING <var>$y_id_field</var></span>, <span>STRING <var>$y_table_name</var></span> )</code>

		<div class="description short">
			
<p>Get A UNIQUE (SAFE) ID for DB Tables</p>

		</div>

		<div class="description detailed hidden">
			
<p>Get A UNIQUE (SAFE) ID for DB Tables</p>



				<h4>Parameters</h4>
				<div class="list"><dl>
					<dt><var>$y_mode</var></dt>
					<dd>:: mode: uid10str | uid10num | uid36 | uid45</dd>
					<dt><var>$y_id_field</var></dt>
					<dd>$y_field_name :: the field name</dd>
					<dt><var>$y_table_name</var></dt>
					<dd>:: the table name</dd>
				</dl></div>

				<h4>Returns</h4>
				<div class="list">
					<code>STRING</code><br>:: the generated Unique ID<br>
				</div>




		</div>
		</div></td>
	</tr>
	</table>


















</div>

	<div id="footer">
		Documentation for PHP Classes and Functions // <a href="http://demo.unix-world.org/smart-framework/" target="_blank">Smart.Framework Documentation :: 2019-10-23 06:42</a>
	</div>
</div>
</div>
</body>
</html>
