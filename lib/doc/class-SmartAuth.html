<!DOCTYPE html>
<html>
<head>
	<meta charset="utf-8">
	<title>Class SmartAuth | Smart.Framework Documentation :: 2019-01-07 12:29</title>
	<link rel="stylesheet" href="resources/style.css?2361662816">
	<script src="resources/combined.js?4174473549"></script>
	<script src="elementlist.js?3544134270"></script>
</head>

<body>
<div id="left">
	<div id="menu">
		<a href="index.html" title="Overview"><span>Overview</span></a>


		<div id="groups">
			<h3>Packages</h3>
			<ul>
				<li class="active"><a href="package-Application.html">Application</a>
						</li>
				<li><a href="package-Archivers.html">Archivers</a>
						</li>
				<li><a href="package-Base.html">Base</a>
						</li>
				<li><a href="package-Components.Core.html">Components:Core</a>
						</li>
				<li><a href="package-Components.Misc.html">Components:Misc</a>
						</li>
				<li><a href="package-Converters.html">Converters</a>
						</li>
				<li><a href="package-Crypto.html">Crypto</a>
						</li>
				<li><a href="package-Database.MongoDB.html">Database:MongoDB</a>
						</li>
				<li><a href="package-Database.MySQL.html">Database:MySQL</a>
						</li>
				<li><a href="package-Database.PostgreSQL.html">Database:PostgreSQL</a>
						</li>
				<li><a href="package-Database.Redis.html">Database:Redis</a>
						</li>
				<li><a href="package-Database.SQLite.html">Database:SQLite</a>
						</li>
				<li><a href="package-Exporters.html">Exporters</a>
						</li>
				<li><a href="package-Filesystem.html">Filesystem</a>
						</li>
				<li><a href="package-Mailer.html">Mailer</a>
						</li>
				<li><a href="package-Network.html">Network</a>
						</li>
				<li><a href="package-Parsers.html">Parsers</a>
						</li>
				<li><a href="package-Templating.Engines.html">Templating:Engines</a>
						</li>
			</ul>
		</div>

		<hr>


		<div id="elements">
			<h3>Classes</h3>
			<ul>
				<li><a href="class-SmartAbstractAppController.html">SmartAbstractAppController</a></li>
				<li><a href="class-SmartAdapterTextTranslations.html">SmartAdapterTextTranslations</a></li>
				<li><a href="class-SmartAppInfo.html">SmartAppInfo</a></li>
				<li class="active"><a href="class-SmartAuth.html">SmartAuth</a></li>
				<li><a href="class-SmartCache.html">SmartCache</a></li>
				<li><a href="class-SmartCustomSession.html">SmartCustomSession</a></li>
				<li><a href="class-SmartFrameworkSecurity.html">SmartFrameworkSecurity</a></li>
				<li><a href="class-SmartPersistentCache.html">SmartPersistentCache</a></li>
				<li><a href="class-SmartSession.html">SmartSession</a></li>
				<li><a href="class-SmartTextTranslations.html">SmartTextTranslations</a></li>
			</ul>





		</div>
	</div>
</div>

<div id="splitter"></div>

<div id="right">
<div id="rightInner">
	<form id="search">
		<input type="hidden" name="cx" value="">
		<input type="hidden" name="ie" value="UTF-8">
		<input type="text" name="q" class="text">
		<input type="submit" value="Search">
	</form>

	<div id="navigation">
		<ul>
			<li>
				<a href="index.html" title="Overview"><span>Overview</span></a>
			</li>
			<li>
				<a href="package-Application.html" title="Summary of Application"><span>Package</span></a>
			</li>
			<li class="active">
<span>Class</span>			</li>
		</ul>
		<ul>
			<li>
				<a href="tree.html" title="Tree view of classes, interfaces, traits and exceptions"><span>Tree</span></a>
			</li>
		</ul>
		<ul>
		</ul>
	</div>

<div id="content" class="class">
	<h1>Class SmartAuth</h1>


	<div class="description">
	
<p>Class: Smart Authentication - provides a safe, in-memory object, to store the
authentication data and to provide a standard way to work with authentication
inside the Smart.Framework / modules.</p>

<p>It must be re-populated on each execution. This ensure using a good practice
for Auth mechanisms. It provides the core and only STATIC methods to integrate
authentication with Smart.Framework</p>

<p>The very important security concerns regarding the authentication protection
against forgery, the mechanism implemented in this class will offer a very good
protection by using CONSTANTS, so after a successful or failed authentication,
the page needs to refresh or load another page in order to change authentication
data. This comes as a result of more than 15 years research over web and
client/server technologies ...</p>

<p>The best practices are to never store Authentication objects in session
because session can be forged. To avoid such bad practices this object provide
just STATIC methods !! The best way is to store just the login ID and a safe
password HASH (irreversible) in session and re-check authentication each time
when the page is loaded or to use the HTTP AUTH mechanism to avoid store in
session the username / password hash. Or this can be combined with cookies, but
requires much more atention to pay by avoiding session forgery or cookie
leakage. Session must be protected against forgery by implementing advanced
detection mechanisms based on IP address and the browser signature of the
client. The Smart Session provides a good layer for this purpose.</p>

<pre>
<span
class="php-comment">// Usage example:</span>
SmartAuth::some_method_of_this_class(...);
</pre>

	</div>









	<div class="info">
		<b>Final</b><br>
		
		
		<b>Package:</b> <a href="package-Application.html">Application</a><br>

				<b>Version:</b>
				v.181025<br>
				<b>Depends:</b>
				-<br>
				<b>Usage:</b>
				static object: Class::method() - This class provides only STATIC methods<br>
		<b>Located at</b> framework/lib_auth.php<br>
	</div>



	<table class="summary methods" id="methods">
	<caption>Methods summary</caption>
	<tr data-order="set_login_data" id="_set_login_data">

		<td class="attributes"><code>
			 public static
			BOOLEAN
			
			</code>
		</td>

		<td class="name"><div>
		<a class="anchor" href="#_set_login_data">#</a>
		<code>set_login_data( <span>STRING <var>$y_user_id</var></span>, <span>STRING <var>$y_user_alias</var></span>, <span>STRING <var>$y_user_email</var> = <span class="php-quote">''</span></span>, <span>STRING <var>$y_user_fullname</var> = <span class="php-quote">''</span></span>, <span>ARRAY <var>$y_user_privileges_list</var> = <span class="php-keyword1">array</span>(<span class="php-quote">'none'</span>,<span class="php-quote">'no-privilege'</span>)</span>, <span>STRING <var>$y_user_quota</var> = -<span class="php-num">1</span></span>, <span>ARRAY <var>$y_user_metadata</var> = <span class="php-keyword1">array</span>()</span>, <span>STRING <var>$y_realm</var> = <span class="php-quote">'DEFAULT'</span></span>, <span>ENUM <var>$y_method</var> = <span class="php-quote">''</span></span>, <span>STRING <var>$y_pass</var> = <span class="php-quote">''</span></span> )</code>

		<div class="description short">
			
<p>Set the (in-memory) Auth Login Data It can be used just once per execution
(session) as it stores the data using constants, and the data cannot be changed
after a successful or failed authentication has set.</p>

		</div>

		<div class="description detailed hidden">
			
<p>Set the (in-memory) Auth Login Data It can be used just once per execution
(session) as it stores the data using constants, and the data cannot be changed
after a successful or failed authentication has set.</p>



				<h4>Parameters</h4>
				<div class="list"><dl>
					<dt><var>$y_user_id</var></dt>
					<dd>:: The user (login) ID used to authenticate the user ; Mandatory ; it can be the
UserID from DB or if not using a DB must supply a unique ID to identify the user
like username</dd>
					<dt><var>$y_user_alias</var></dt>
					<dd>:: The user (login) Alias (aka Username), used to display the logged in user ;
Mandatory ; can be the same as the login ID or different (Ex: login ID can be
'myUserName' and this 'myUserName' ; or: login ID can be 5017 and this
'myUserName')</dd>
					<dt><var>$y_user_email</var></dt>
					<dd>:: &lt;em&gt;OPTIONAL&lt;/em&gt; The user Email ; if email is used as login ID this may be
redundant !</dd>
					<dt><var>$y_user_fullname</var></dt>
					<dd>:: &lt;em&gt;OPTIONAL&lt;/em&gt; The user Full Name (First Name + Last Name)</dd>
					<dt><var>$y_user_privileges_list</var></dt>
					<dd>:: &lt;em&gt;OPTIONAL&lt;/em&gt; The user Privileges List as array that list all the current
user privileges</dd>
					<dt><var>$y_user_quota</var></dt>
					<dd>:: &lt;em&gt;OPTIONAL&lt;/em&gt; The user (storage) Quota</dd>
					<dt><var>$y_user_metadata</var></dt>
					<dd>:: &lt;em&gt;OPTIONAL&lt;/em&gt; The user metainfo, associative array key =&amp;gt; value</dd>
					<dt><var>$y_realm</var></dt>
					<dd>:: &lt;em&gt;OPTIONAL&lt;/em&gt; The user Authentication Realm(s)</dd>
					<dt><var>$y_method</var></dt>
					<dd>:: &lt;em&gt;OPTIONAL&lt;/em&gt; The authentication method used: HTTP-BASIC / HTTP-DIGEST /
OTHER</dd>
					<dt><var>$y_pass</var></dt>
					<dd>:: &lt;em&gt;OPTIONAL&lt;/em&gt; The user login password (will be stored in memory as
Blowfish encrypted to avoid exposure)</dd>
				</dl></div>

				<h4>Returns</h4>
				<div class="list">
					<code>BOOLEAN</code><br>:: TRUE if all data is OK, FALSE if not or try to reauthenticate under the same
execution (which is not allowed ; must be just once per execution)<br>
				</div>




		</div>
		</div></td>
	</tr>
	<tr data-order="check_login" id="_check_login">

		<td class="attributes"><code>
			 public static
			BOOLEAN
			
			</code>
		</td>

		<td class="name"><div>
		<a class="anchor" href="#_check_login">#</a>
		<code>check_login( )</code>

		<div class="description short">
			
<p>Check the (in-memory) Auth Login Data if the current user is logged-in</p>

		</div>

		<div class="description detailed hidden">
			
<p>Check the (in-memory) Auth Login Data if the current user is logged-in</p>




				<h4>Returns</h4>
				<div class="list">
					<code>BOOLEAN</code><br>:: TRUE if current user is Logged-in, FALSE if not<br>
				</div>




		</div>
		</div></td>
	</tr>
	<tr data-order="get_login_method" id="_get_login_method">

		<td class="attributes"><code>
			 public static
			STRING
			
			</code>
		</td>

		<td class="name"><div>
		<a class="anchor" href="#_get_login_method">#</a>
		<code>get_login_method( )</code>

		<div class="description short">
			
<p>Get the auth user login method from (in-memory) Auth Login Data</p>

		</div>

		<div class="description detailed hidden">
			
<p>Get the auth user login method from (in-memory) Auth Login Data</p>




				<h4>Returns</h4>
				<div class="list">
					<code>STRING</code><br>:: The user login method<br>
				</div>




		</div>
		</div></td>
	</tr>
	<tr data-order="get_login_password" id="_get_login_password">

		<td class="attributes"><code>
			 public static
			STRING
			
			</code>
		</td>

		<td class="name"><div>
		<a class="anchor" href="#_get_login_password">#</a>
		<code>get_login_password( )</code>

		<div class="description short">
			
<p>Get the auth (safe) stored password from (in-memory)</p>

		</div>

		<div class="description detailed hidden">
			
<p>Get the auth (safe) stored password from (in-memory)</p>




				<h4>Returns</h4>
				<div class="list">
					<code>STRING</code><br>:: The plain password if was set or empty string<br>
				</div>




		</div>
		</div></td>
	</tr>
	<tr data-order="get_login_data" id="_get_login_data">

		<td class="attributes"><code>
			 public static
			ARRAY
			
			</code>
		</td>

		<td class="name"><div>
		<a class="anchor" href="#_get_login_data">#</a>
		<code>get_login_data( )</code>

		<div class="description short">
			
<p>Get the (in-memory) Auth Login Data</p>

		</div>

		<div class="description detailed hidden">
			
<p>Get the (in-memory) Auth Login Data</p>




				<h4>Returns</h4>
				<div class="list">
					<code>ARRAY</code><br>:: a complete array containing all the meta-data of the current auth user<br>
				</div>




		</div>
		</div></td>
	</tr>
	<tr data-order="get_login_id" id="_get_login_id">

		<td class="attributes"><code>
			 public static
			STRING
			
			</code>
		</td>

		<td class="name"><div>
		<a class="anchor" href="#_get_login_id">#</a>
		<code>get_login_id( )</code>

		<div class="description short">
			
<p>Get the current user (login) ID from the (in-memory) Auth Login Data</p>

		</div>

		<div class="description detailed hidden">
			
<p>Get the current user (login) ID from the (in-memory) Auth Login Data</p>




				<h4>Returns</h4>
				<div class="list">
					<code>STRING</code><br>:: if current user is Logged-in will get the user (login) ID which is mandatory,
else an empty string<br>
				</div>




		</div>
		</div></td>
	</tr>
	<tr data-order="get_login_email" id="_get_login_email">

		<td class="attributes"><code>
			 public static
			STRING
			
			</code>
		</td>

		<td class="name"><div>
		<a class="anchor" href="#_get_login_email">#</a>
		<code>get_login_email( )</code>

		<div class="description short">
			
<p>Get the current user email from the (in-memory) Auth Login Data</p>

		</div>

		<div class="description detailed hidden">
			
<p>Get the current user email from the (in-memory) Auth Login Data</p>




				<h4>Returns</h4>
				<div class="list">
					<code>STRING</code><br>:: returns the user login email or an empty string if not set<br>
				</div>




		</div>
		</div></td>
	</tr>
	<tr data-order="get_login_alias" id="_get_login_alias">

		<td class="attributes"><code>
			 public static
			STRING
			
			</code>
		</td>

		<td class="name"><div>
		<a class="anchor" href="#_get_login_alias">#</a>
		<code>get_login_alias( )</code>

		<div class="description short">
			
<p>Get the current user login alias (username) from the (in-memory) Auth Login
Data</p>

		</div>

		<div class="description detailed hidden">
			
<p>Get the current user login alias (username) from the (in-memory) Auth Login
Data</p>




				<h4>Returns</h4>
				<div class="list">
					<code>STRING</code><br>:: returns the user login alias (username) or an empty string if not set<br>
				</div>




		</div>
		</div></td>
	</tr>
	<tr data-order="get_login_fullname" id="_get_login_fullname">

		<td class="attributes"><code>
			 public static
			STRING
			
			</code>
		</td>

		<td class="name"><div>
		<a class="anchor" href="#_get_login_fullname">#</a>
		<code>get_login_fullname( )</code>

		<div class="description short">
			
<p>Get the current user Full Name (First + Last Name) from the (in-memory) Auth
Login Data</p>

		</div>

		<div class="description detailed hidden">
			
<p>Get the current user Full Name (First + Last Name) from the (in-memory) Auth
Login Data</p>




				<h4>Returns</h4>
				<div class="list">
					<code>STRING</code><br>:: returns the user login full name or an empty string if not set<br>
				</div>




		</div>
		</div></td>
	</tr>
	<tr data-order="get_login_privileges" id="_get_login_privileges">

		<td class="attributes"><code>
			 public static
			STRING
			
			</code>
		</td>

		<td class="name"><div>
		<a class="anchor" href="#_get_login_privileges">#</a>
		<code>get_login_privileges( )</code>

		<div class="description short">
			
<p>Get the list of the current user privileges stored in the (in-memory) Auth
Login Data</p>

		</div>

		<div class="description detailed hidden">
			
<p>Get the list of the current user privileges stored in the (in-memory) Auth
Login Data</p>




				<h4>Returns</h4>
				<div class="list">
					<code>STRING</code><br>:: returns user login privileges as a list-string like: '
<privilege_one>,
	<privilege_two>,...' or an empty string if not set</privilege_two>
</privilege_one>
<br>
				</div>




		</div>
		</div></td>
	</tr>
	<tr data-order="get_login_arr_privileges" id="_get_login_arr_privileges">

		<td class="attributes"><code>
			 public static
			ARRAY
			
			</code>
		</td>

		<td class="name"><div>
		<a class="anchor" href="#_get_login_arr_privileges">#</a>
		<code>get_login_arr_privileges( )</code>

		<div class="description short">
			
<p>Get the array of the current user privileges stored in the (in-memory) Auth
Login Data</p>

		</div>

		<div class="description detailed hidden">
			
<p>Get the array of the current user privileges stored in the (in-memory) Auth
Login Data</p>




				<h4>Returns</h4>
				<div class="list">
					<code>ARRAY</code><br>:: returns user login privileges as an array[privilege_one, privilege_two, ...]
or an empty array if not set<br>
				</div>




		</div>
		</div></td>
	</tr>
	<tr data-order="test_login_privilege" id="_test_login_privilege">

		<td class="attributes"><code>
			 public static
			BOOLEAN
			
			</code>
		</td>

		<td class="name"><div>
		<a class="anchor" href="#_test_login_privilege">#</a>
		<code>test_login_privilege( <span>mixed <var>$y_privilege_to_test</var></span> )</code>

		<div class="description short">
			
<p>Test if the current user privileges contain the tested one using the
(in-memory) Auth Login Data</p>

		</div>

		<div class="description detailed hidden">
			
<p>Test if the current user privileges contain the tested one using the
(in-memory) Auth Login Data</p>




				<h4>Returns</h4>
				<div class="list">
					<code>BOOLEAN</code><br>:: TRUE if the current user have the tested privilege or FALSE if does not<br>
				</div>




		</div>
		</div></td>
	</tr>
	<tr data-order="get_login_quota" id="_get_login_quota">

		<td class="attributes"><code>
			 public static
			INTEGER
			
			</code>
		</td>

		<td class="name"><div>
		<a class="anchor" href="#_get_login_quota">#</a>
		<code>get_login_quota( )</code>

		<div class="description short">
			
<p>Get the current user quota stored in the (in-memory) Auth Login Data</p>

		</div>

		<div class="description detailed hidden">
			
<p>Get the current user quota stored in the (in-memory) Auth Login Data</p>




				<h4>Returns</h4>
				<div class="list">
					<code>INTEGER</code><br>:: returns the user (storage) quota<br>
				</div>




		</div>
		</div></td>
	</tr>
	<tr data-order="get_login_metadata" id="_get_login_metadata">

		<td class="attributes"><code>
			 public static
			ARRAY
			
			</code>
		</td>

		<td class="name"><div>
		<a class="anchor" href="#_get_login_metadata">#</a>
		<code>get_login_metadata( )</code>

		<div class="description short">
			
<p>Get the current user metadata stored in the (in-memory) Auth Login Data</p>

		</div>

		<div class="description detailed hidden">
			
<p>Get the current user metadata stored in the (in-memory) Auth Login Data</p>




				<h4>Returns</h4>
				<div class="list">
					<code>ARRAY</code><br>:: returns an array with all current user metadata<br>
				</div>




		</div>
		</div></td>
	</tr>
	<tr data-order="get_login_realm" id="_get_login_realm">

		<td class="attributes"><code>
			 public static
			STRING
			
			</code>
		</td>

		<td class="name"><div>
		<a class="anchor" href="#_get_login_realm">#</a>
		<code>get_login_realm( )</code>

		<div class="description short">
			
<p>Get the auth realm of the current user stored in the (in-memory) Auth Login
Data</p>

		</div>

		<div class="description detailed hidden">
			
<p>Get the auth realm of the current user stored in the (in-memory) Auth Login
Data</p>




				<h4>Returns</h4>
				<div class="list">
					<code>STRING</code><br>:: returns the current user auth realm or an empty string if not set<br>
				</div>




		</div>
		</div></td>
	</tr>
	<tr data-order="build_arr_privileges" id="_build_arr_privileges">

		<td class="attributes"><code>
			 public static
			ARRAY
			
			</code>
		</td>

		<td class="name"><div>
		<a class="anchor" href="#_build_arr_privileges">#</a>
		<code>build_arr_privileges( <span>MIXED <var>$y_priv_list</var></span> )</code>

		<div class="description short">
			
<p>Build the associative Array of Auth Privileges</p>

		</div>

		<div class="description detailed hidden">
			
<p>Build the associative Array of Auth Privileges</p>



				<h4>Parameters</h4>
				<div class="list"><dl>
					<dt><var>$y_priv_list</var></dt>
					<dd>:: List of Privileges as ARRAY Array('priv&lt;sub&gt;1&lt;/sub&gt;', 'priv&lt;sub&gt;2&lt;/sub&gt;',
..., 'priv&lt;sub&gt;n&lt;/sub&gt;') or STRING '
&lt;priv_1&gt;,
	&lt;priv_2&gt;, ...,
		&lt;priv_n&gt;'&lt;/priv_n&gt;
	&lt;/priv_2&gt;
&lt;/priv_1&gt;
</dd>
				</dl></div>

				<h4>Returns</h4>
				<div class="list">
					<code>ARRAY</code><br>:: returns the associative array of auth privileges as Array('priv<sub>1</sub>'
=&gt; 'Priv 1', 'priv<sub>2</sub>' =&gt; 'Priv 2', ..., 'priv<sub>n</sub>' =&gt;
'Priv n')<br>
				</div>




		</div>
		</div></td>
	</tr>
	</table>


















</div>

	<div id="footer">
		Documentation for PHP Classes and Functions // <a href="http://demo.unix-world.org/smart-framework/" target="_blank">Smart.Framework Documentation :: 2019-01-07 12:29</a>
	</div>
</div>
</div>
</body>
</html>
