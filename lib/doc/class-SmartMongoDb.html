<!DOCTYPE html>
<html>
<head>
	<meta charset="utf-8">
	<title>Class SmartMongoDb | Smart.Framework Documentation :: 2019-10-23 06:42</title>
	<link rel="stylesheet" href="resources/style.css?2361662816">
	<script src="resources/combined.js?4174473549"></script>
	<script src="elementlist.js?830703499"></script>
</head>

<body>
<div id="left">
	<div id="menu">
		<a href="index.html" title="Overview"><span>Overview</span></a>


		<div id="groups">
			<h3>Packages</h3>
			<ul>
				<li><a href="package-Application.html">Application</a>
						</li>
				<li><a href="package-Archivers.html">Archivers</a>
						</li>
				<li><a href="package-Base.html">Base</a>
						</li>
				<li><a href="package-Components.Core.html">Components:Core</a>
						</li>
				<li><a href="package-Components.Misc.html">Components:Misc</a>
						</li>
				<li><a href="package-Converters.html">Converters</a>
						</li>
				<li><a href="package-Crypto.html">Crypto</a>
						</li>
				<li class="active"><a href="package-Database.MongoDB.html">Database:MongoDB</a>
						</li>
				<li><a href="package-Database.MySQL.html">Database:MySQL</a>
						</li>
				<li><a href="package-Database.PostgreSQL.html">Database:PostgreSQL</a>
						</li>
				<li><a href="package-Database.Redis.html">Database:Redis</a>
						</li>
				<li><a href="package-Database.SQLite.html">Database:SQLite</a>
						</li>
				<li><a href="package-Exporters.html">Exporters</a>
						</li>
				<li><a href="package-Filesystem.html">Filesystem</a>
						</li>
				<li><a href="package-Mailer.html">Mailer</a>
						</li>
				<li><a href="package-Network.html">Network</a>
						</li>
				<li><a href="package-Parsers.html">Parsers</a>
						</li>
				<li><a href="package-Templating.Engines.html">Templating:Engines</a>
						</li>
			</ul>
		</div>

		<hr>


		<div id="elements">
			<h3>Classes</h3>
			<ul>
				<li class="active"><a href="class-SmartMongoDb.html">SmartMongoDb</a></li>
			</ul>





		</div>
	</div>
</div>

<div id="splitter"></div>

<div id="right">
<div id="rightInner">
	<form id="search">
		<input type="hidden" name="cx" value="">
		<input type="hidden" name="ie" value="UTF-8">
		<input type="text" name="q" class="text">
		<input type="submit" value="Search">
	</form>

	<div id="navigation">
		<ul>
			<li>
				<a href="index.html" title="Overview"><span>Overview</span></a>
			</li>
			<li>
				<a href="package-Database.MongoDB.html" title="Summary of Database:MongoDB"><span>Package</span></a>
			</li>
			<li class="active">
<span>Class</span>			</li>
		</ul>
		<ul>
			<li>
				<a href="tree.html" title="Tree view of classes, interfaces, traits and exceptions"><span>Tree</span></a>
			</li>
		</ul>
		<ul>
		</ul>
	</div>

<div id="content" class="class">
	<h1>Class SmartMongoDb</h1>


	<div class="description">
	
<p>Class Smart MongoDB Client (for PHP MongoDB extension v.1.1.0 or later)
Tested and Stable on MongoDB Server versions: 3.2 / 3.4 / 3.6 / 4.0 / 4.1</p>

<pre>

<span class="php-comment">// sample mongo config</span>
<span
class="php-var">$cfg_mongo</span> = <span
class="php-keyword1">array</span>();
<span
class="php-var">$cfg_mongo</span>[<span
class="php-quote">'type'</span>]              = <span
class="php-quote">'mongo-standalone'</span>;                                   <span
class="php-comment">// mongodb server(s) type: 'mongo-standalone' | 'mongo-cluster' (sharding)</span>
<span
class="php-var">$cfg_mongo</span>[<span
class="php-quote">'server-host'</span>]       = <span
class="php-quote">'127.0.0.1'</span>;                                          <span
class="php-comment">// mongodb host</span>
<span
class="php-var">$cfg_mongo</span>[<span
class="php-quote">'server-port'</span>]       = <span
class="php-quote">'27017'</span>;                                              <span
class="php-comment">// mongodb port</span>
<span
class="php-var">$cfg_mongo</span>[<span
class="php-quote">'dbname'</span>]            = <span
class="php-quote">'smart_framework'</span>;                                    <span
class="php-comment">// mongodb database</span>
<span
class="php-var">$cfg_mongo</span>[<span
class="php-quote">'username'</span>]          = <span
class="php-quote">''</span>;                                                   <span
class="php-comment">// mongodb username</span>
<span
class="php-var">$cfg_mongo</span>[<span
class="php-quote">'password'</span>]          = <span
class="php-quote">''</span>;                                                   <span
class="php-comment">// mongodb Base64-Encoded password</span>
<span
class="php-var">$cfg_mongo</span>[<span
class="php-quote">'timeout'</span>]           = <span
class="php-num">5</span>;                                                    <span
class="php-comment">// mongodb connect timeout in seconds</span>
<span
class="php-var">$cfg_mongo</span>[<span
class="php-quote">'slowtime'</span>]          = <span
class="php-num">0.0035</span>;                                               <span
class="php-comment">// 0.0025 .. 0.0090 slow query time (for debugging)</span>

<span
class="php-var">$mongo</span> = <span
class="php-keyword1">new</span> \SmartMongoDb(<span
class="php-var">$cfg_mongo</span>);

<span
class="php-comment">// sample insert</span>
<span
class="php-var">$doc</span> = [];
<span class="php-var">$doc</span>[<span
class="php-quote">'_id'</span>]  = <span
class="php-var">$mongo</span>-&gt;assign_uuid();
<span
class="php-var">$doc</span>[<span class="php-quote">'name'</span>] = <span
class="php-quote">'My Name'</span>;
<span class="php-var">$doc</span>[<span
class="php-quote">'description'</span>] = <span
class="php-quote">'Some description goes here ...'</span>;
<span
class="php-var">$insert</span> = <span
class="php-var">$mongo</span>-&gt;insert(<span
class="php-quote">'myTestCollection'</span>, <span
class="php-var">$doc</span>);
<span class="php-keyword2">var_dump</span>(<span
class="php-var">$insert</span>);

<span
class="php-comment">// sample find</span>
<span
class="php-var">$query</span> = <span
class="php-var">$mongo</span>-&gt;find(
        <span
class="php-quote">'myTestCollection'</span>,
        [ <span
class="php-quote">'name'</span> =&gt; <span
class="php-quote">'My Name'</span> ], <span
class="php-comment">// filter (update all except these)</span>
        [ <span
class="php-comment">// projection</span>
                <span
class="php-quote">'name'</span>,
                <span
class="php-quote">'description'</span>
        ],
        [
                <span
class="php-quote">'limit'</span> =&gt; <span class="php-num">1</span>, <span
class="php-comment">// limit</span>
                <span
class="php-quote">'skip'</span> =&gt; <span class="php-num">0</span> <span
class="php-comment">// offset</span>
        ]
);
<span
class="php-keyword2">var_dump</span>(<span
class="php-var">$query</span>);

</pre>

	</div>









	<div class="info">
		<b>Final</b><br>
		
		
		<b>Package:</b> <a href="package-Database.MongoDB.html">Database:MongoDB</a><br>

				<b>Version:</b>
				v.20190423<br>
				<b>Depends:</b>
				extensions: PHP MongoDB (v.1.1.0 or later) ; classes: Smart<br>
				<b>Hint:</b>
				Important: MongoDB database specifies that max BSON document size is 16
megabytes and supports no more than 100 levels of nesting, thus this limit
cannot be exceeded from PHP side when creating new mongodb documents: <a
href="https://docs.mongodb.com/manual/reference/limits/">https://docs.mongodb.com/manual/reference/limits/</a>
; To store documents larger than the maximum size, MongoDB provides the GridFS
API<br>
				<b>Usage:</b>
				dynamic object: (new Class())-&gt;method() - This class provides only DYNAMIC
methods<br>
		<b>Located at</b> core/plugins/lib_db_mongodb.php<br>
	</div>



	<table class="summary methods" id="methods">
	<caption>Methods summary</caption>
	<tr data-order="__construct" id="___construct">

		<td class="attributes"><code>
			 public 
			
			
			</code>
		</td>

		<td class="name"><div>
		<a class="anchor" href="#___construct">#</a>
		<code>__construct( <span>STRING <var>$y_configs_arr</var> = <span class="php-keyword1">array</span>()</span>, <span>ARRAY <var>$y_fatal_err</var> = <span class="php-keyword1">true</span></span> )</code>

		<div class="description short">
			
<p>Class constructor</p>

		</div>

		<div class="description detailed hidden">
			
<p>Class constructor</p>



				<h4>Parameters</h4>
				<div class="list"><dl>
					<dt><var>$y_configs_arr</var></dt>
					<dd>$col :: MongoDB Collection</dd>
					<dt><var>$y_fatal_err</var></dt>
					<dd>$y_configs_arr :: The Array of Configuration parameters - the ARRAY STRUCTURE
should be identical with the default config.php: $configs['mongodb'].</dd>
				</dl></div>





		</div>
		</div></td>
	</tr>
	<tr data-order="assign_uuid" id="_assign_uuid">

		<td class="attributes"><code>
			 public 
			STRING
			
			</code>
		</td>

		<td class="name"><div>
		<a class="anchor" href="#_assign_uuid">#</a>
		<code>assign_uuid( )</code>

		<div class="description short">
			
<p>A replacement for the default MongoDB object ID, will generate a 32
characters very unique UUID</p>

		</div>

		<div class="description detailed hidden">
			
<p>A replacement for the default MongoDB object ID, will generate a 32
characters very unique UUID</p>




				<h4>Returns</h4>
				<div class="list">
					<code>STRING</code><br>:: UUID (base36)<br>
				</div>




		</div>
		</div></td>
	</tr>
	<tr data-order="get_ext_version" id="_get_ext_version">

		<td class="attributes"><code>
			 public 
			STRING
			
			</code>
		</td>

		<td class="name"><div>
		<a class="anchor" href="#_get_ext_version">#</a>
		<code>get_ext_version( )</code>

		<div class="description short">
			
<p>Get the MongoDB Extension version</p>

		</div>

		<div class="description detailed hidden">
			
<p>Get the MongoDB Extension version</p>




				<h4>Returns</h4>
				<div class="list">
					<code>STRING</code><br>:: MongoDB extension version<br>
				</div>




		</div>
		</div></td>
	</tr>
	<tr data-order="get_server_version" id="_get_server_version">

		<td class="attributes"><code>
			 public 
			STRING
			
			</code>
		</td>

		<td class="name"><div>
		<a class="anchor" href="#_get_server_version">#</a>
		<code>get_server_version( )</code>

		<div class="description short">
			
<p>Get the MongoDB server version</p>

		</div>

		<div class="description detailed hidden">
			
<p>Get the MongoDB server version</p>




				<h4>Returns</h4>
				<div class="list">
					<code>STRING</code><br>:: MongoDB version<br>
				</div>




		</div>
		</div></td>
	</tr>
	<tr data-order="getFtsDictionaryByLang" id="_getFtsDictionaryByLang">

		<td class="attributes"><code>
			 public 
			STRING
			
			</code>
		</td>

		<td class="name"><div>
		<a class="anchor" href="#_getFtsDictionaryByLang">#</a>
		<code>getFtsDictionaryByLang( <span>mixed <var>$lang</var></span> )</code>

		<div class="description short">
			
<p>Get the MongoDB FTS Dictionary by Two Letter language code (ISO 639-1)</p>

		</div>

		<div class="description detailed hidden">
			
<p>Get the MongoDB FTS Dictionary by Two Letter language code (ISO 639-1)</p>




				<h4>Returns</h4>
				<div class="list">
					<code>STRING</code><br>:: dictionary name (ex: 'english' - if available or 'none' - if n/a)<br>
				</div>




		</div>
		</div></td>
	</tr>
	<tr data-order="is_command_ok" id="_is_command_ok">

		<td class="attributes"><code>
			 public 
			BOOLEAN
			
			</code>
		</td>

		<td class="name"><div>
		<a class="anchor" href="#_is_command_ok">#</a>
		<code>is_command_ok( <span>MIXED <var>$result</var></span> )</code>

		<div class="description short">
			
<p>Test if a command output is OK compliant (will check if result[0][ok] == 1)
Notice: not all MongoDB commands will return this standard answer, but for most
will work</p>

		</div>

		<div class="description detailed hidden">
			
<p>Test if a command output is OK compliant (will check if result[0][ok] == 1)
Notice: not all MongoDB commands will return this standard answer, but for most
will work</p>



				<h4>Parameters</h4>
				<div class="list"><dl>
					<dt><var>$result</var></dt>
					<dd>:: result output from a mongodb command</dd>
				</dl></div>

				<h4>Returns</h4>
				<div class="list">
					<code>BOOLEAN</code><br>:: TRUE / FALSE<br>
				</div>




		</div>
		</div></td>
	</tr>
	</table>



	<table class="summary methods" id="magicMethods">
	<caption>Magic methods summary</caption>
	<tr data-order="count" id="m_count">

		<td class="attributes"><code>
			 public 
			MIXED
			
			</code>
		</td>

		<td class="name"><div>
		<a class="anchor" href="#m_count">#</a>
		<code>count( <span>mixed <var>$strCollection</var></span>, <span>mixed <var>$arrQuery</var></span> )</code>

		<div class="description short">
			
<p># count documents in a collection</p>

		</div>

		<div class="description detailed hidden">
			
<p># count documents in a collection</p>



				<h4>Parameters</h4>
				<div class="list"><dl>
					<dt><var>$strCollection</var></dt>
					<dd></dd>
					<dt><var>$arrQuery</var></dt>
					<dd></dd>
				</dl></div>

				<h4>Returns</h4>
				<div class="list">
					<code>MIXED</code><br>MIXED<br>
				</div>




		</div>
		</div></td>
	</tr>
	<tr data-order="find" id="m_find">

		<td class="attributes"><code>
			 public 
			MIXED
			
			</code>
		</td>

		<td class="name"><div>
		<a class="anchor" href="#m_find">#</a>
		<code>find( <span>mixed <var>$strCollection</var></span>, <span>mixed <var>$arrQuery</var></span>, <span>mixed <var>$arrProjFields</var></span>, <span>mixed <var>$arrOptions</var></span> )</code>

		<div class="description short">
			
<p># find single or multiple documents in a collection with optional filter
criteria / limit</p>

		</div>

		<div class="description detailed hidden">
			
<p># find single or multiple documents in a collection with optional filter
criteria / limit</p>



				<h4>Parameters</h4>
				<div class="list"><dl>
					<dt><var>$strCollection</var></dt>
					<dd></dd>
					<dt><var>$arrQuery</var></dt>
					<dd></dd>
					<dt><var>$arrProjFields</var></dt>
					<dd></dd>
					<dt><var>$arrOptions</var></dt>
					<dd></dd>
				</dl></div>

				<h4>Returns</h4>
				<div class="list">
					<code>MIXED</code><br>MIXED<br>
				</div>




		</div>
		</div></td>
	</tr>
	<tr data-order="findone" id="m_findone">

		<td class="attributes"><code>
			 public 
			MIXED
			
			</code>
		</td>

		<td class="name"><div>
		<a class="anchor" href="#m_findone">#</a>
		<code>findone( <span>mixed <var>$strCollection</var></span>, <span>mixed <var>$arrQuery</var></span>, <span>mixed <var>$arrProjFields</var></span>, <span>mixed <var>$arrOptions</var></span> )</code>

		<div class="description short">
			
<p># find single document in a collection with optional filter criteria /
limit</p>

		</div>

		<div class="description detailed hidden">
			
<p># find single document in a collection with optional filter criteria /
limit</p>



				<h4>Parameters</h4>
				<div class="list"><dl>
					<dt><var>$strCollection</var></dt>
					<dd></dd>
					<dt><var>$arrQuery</var></dt>
					<dd></dd>
					<dt><var>$arrProjFields</var></dt>
					<dd></dd>
					<dt><var>$arrOptions</var></dt>
					<dd></dd>
				</dl></div>

				<h4>Returns</h4>
				<div class="list">
					<code>MIXED</code><br>MIXED<br>
				</div>




		</div>
		</div></td>
	</tr>
	<tr data-order="bulkinsert" id="m_bulkinsert">

		<td class="attributes"><code>
			 public 
			MIXED
			
			</code>
		</td>

		<td class="name"><div>
		<a class="anchor" href="#m_bulkinsert">#</a>
		<code>bulkinsert( <span>mixed <var>$strCollection</var></span>, <span>mixed <var>$arrMultiDocs</var></span> )</code>

		<div class="description short">
			
<p># add multiple documents to a collection</p>

		</div>

		<div class="description detailed hidden">
			
<p># add multiple documents to a collection</p>



				<h4>Parameters</h4>
				<div class="list"><dl>
					<dt><var>$strCollection</var></dt>
					<dd></dd>
					<dt><var>$arrMultiDocs</var></dt>
					<dd></dd>
				</dl></div>

				<h4>Returns</h4>
				<div class="list">
					<code>MIXED</code><br>MIXED<br>
				</div>




		</div>
		</div></td>
	</tr>
	<tr data-order="insert" id="m_insert">

		<td class="attributes"><code>
			 public 
			MIXED
			
			</code>
		</td>

		<td class="name"><div>
		<a class="anchor" href="#m_insert">#</a>
		<code>insert( <span>mixed <var>$strCollection</var></span>, <span>mixed <var>$arrDoc</var></span> )</code>

		<div class="description short">
			
<p># add single document to a collection</p>

		</div>

		<div class="description detailed hidden">
			
<p># add single document to a collection</p>



				<h4>Parameters</h4>
				<div class="list"><dl>
					<dt><var>$strCollection</var></dt>
					<dd></dd>
					<dt><var>$arrDoc</var></dt>
					<dd></dd>
				</dl></div>

				<h4>Returns</h4>
				<div class="list">
					<code>MIXED</code><br>MIXED<br>
				</div>




		</div>
		</div></td>
	</tr>
	<tr data-order="upsert" id="m_upsert">

		<td class="attributes"><code>
			 public 
			MIXED
			
			</code>
		</td>

		<td class="name"><div>
		<a class="anchor" href="#m_upsert">#</a>
		<code>upsert( <span>mixed <var>$strCollection</var></span>, <span>mixed <var>$arrFilter</var></span>, <span>mixed <var>$strUpdOp</var></span>, <span>mixed <var>$arrUpd</var></span> )</code>

		<div class="description short">
			
<p># insert single or modify single or multi documents in a collection that are
matching the filter criteria ; this is always non-fatal, will throw catcheable
exception on error ...</p>

		</div>

		<div class="description detailed hidden">
			
<p># insert single or modify single or multi documents in a collection that are
matching the filter criteria ; this is always non-fatal, will throw catcheable
exception on error ...</p>



				<h4>Parameters</h4>
				<div class="list"><dl>
					<dt><var>$strCollection</var></dt>
					<dd></dd>
					<dt><var>$arrFilter</var></dt>
					<dd></dd>
					<dt><var>$strUpdOp</var></dt>
					<dd></dd>
					<dt><var>$arrUpd</var></dt>
					<dd></dd>
				</dl></div>

				<h4>Returns</h4>
				<div class="list">
					<code>MIXED</code><br>MIXED<br>
				</div>




		</div>
		</div></td>
	</tr>
	<tr data-order="update" id="m_update">

		<td class="attributes"><code>
			 public 
			MIXED
			
			</code>
		</td>

		<td class="name"><div>
		<a class="anchor" href="#m_update">#</a>
		<code>update( <span>mixed <var>$strCollection</var></span>, <span>mixed <var>$arrFilter</var></span>, <span>mixed <var>$strUpdOp</var></span>, <span>mixed <var>$arrUpd</var></span> )</code>

		<div class="description short">
			
<p># modify single or many documents in a collection that are matching the
filter criteria</p>

		</div>

		<div class="description detailed hidden">
			
<p># modify single or many documents in a collection that are matching the
filter criteria</p>



				<h4>Parameters</h4>
				<div class="list"><dl>
					<dt><var>$strCollection</var></dt>
					<dd></dd>
					<dt><var>$arrFilter</var></dt>
					<dd></dd>
					<dt><var>$strUpdOp</var></dt>
					<dd></dd>
					<dt><var>$arrUpd</var></dt>
					<dd></dd>
				</dl></div>

				<h4>Returns</h4>
				<div class="list">
					<code>MIXED</code><br>MIXED<br>
				</div>




		</div>
		</div></td>
	</tr>
	<tr data-order="delete" id="m_delete">

		<td class="attributes"><code>
			 public 
			MIXED
			
			</code>
		</td>

		<td class="name"><div>
		<a class="anchor" href="#m_delete">#</a>
		<code>delete( <span>mixed <var>$strCollection</var></span>, <span>mixed <var>$arrFilter</var></span> )</code>

		<div class="description short">
			
<p># delete single or many documents from a collection that are matching the
filter criteria</p>

		</div>

		<div class="description detailed hidden">
			
<p># delete single or many documents from a collection that are matching the
filter criteria</p>



				<h4>Parameters</h4>
				<div class="list"><dl>
					<dt><var>$strCollection</var></dt>
					<dd></dd>
					<dt><var>$arrFilter</var></dt>
					<dd></dd>
				</dl></div>

				<h4>Returns</h4>
				<div class="list">
					<code>MIXED</code><br>MIXED<br>
				</div>




		</div>
		</div></td>
	</tr>
	<tr data-order="command" id="m_command">

		<td class="attributes"><code>
			 public 
			MIXED
			
			</code>
		</td>

		<td class="name"><div>
		<a class="anchor" href="#m_command">#</a>
		<code>command( <span>mixed <var>$arrCmd</var></span> )</code>

		<div class="description short">
			
<p># run a command over database like: aggregate, distinct, mapReduce, create
Collection, drop Collection, ...</p>

		</div>

		<div class="description detailed hidden">
			
<p># run a command over database like: aggregate, distinct, mapReduce, create
Collection, drop Collection, ...</p>



				<h4>Parameters</h4>
				<div class="list"><dl>
					<dt><var>$arrCmd</var></dt>
					<dd></dd>
				</dl></div>

				<h4>Returns</h4>
				<div class="list">
					<code>MIXED</code><br>MIXED<br>
				</div>




		</div>
		</div></td>
	</tr>
	<tr data-order="igcommand" id="m_igcommand">

		<td class="attributes"><code>
			 public 
			MIXED
			
			</code>
		</td>

		<td class="name"><div>
		<a class="anchor" href="#m_igcommand">#</a>
		<code>igcommand( <span>mixed <var>$arrCmd</var></span> )</code>

		<div class="description short">
			
<p># run a command over database and ignore if error ; in the case of throw
error will ignore it and will not stop execution ; will return the errors
instead of result like: create Collection which may throw errors if collection
already exists, drop Collection, similar if does not exists</p>

		</div>

		<div class="description detailed hidden">
			
<p># run a command over database and ignore if error ; in the case of throw
error will ignore it and will not stop execution ; will return the errors
instead of result like: create Collection which may throw errors if collection
already exists, drop Collection, similar if does not exists</p>



				<h4>Parameters</h4>
				<div class="list"><dl>
					<dt><var>$arrCmd</var></dt>
					<dd></dd>
				</dl></div>

				<h4>Returns</h4>
				<div class="list">
					<code>MIXED</code><br>MIXED<br>
				</div>




		</div>
		</div></td>
	</tr>
	</table>















</div>

	<div id="footer">
		Documentation for PHP Classes and Functions // <a href="http://demo.unix-world.org/smart-framework/" target="_blank">Smart.Framework Documentation :: 2019-10-23 06:42</a>
	</div>
</div>
</div>
</body>
</html>
